---
title: mixinä¸hookså¯¹æ¯”
date: 2021-11-25 15:46:00
permalink: /pages/0bbd39/
categories:
  - å‰ç«¯
  - 0ã€‹ç¬”è®°
tags:
  - 
---

# mixinä¸hookså¯¹æ¯”

ä¸¤è€…éƒ½æ˜¯ä¸ºäº†è§£å†³é€»è¾‘ä»£ç å¤ç”¨çš„é—®é¢˜

- mixin æ··å…¥
  - Vue2.x äº§ç‰©
- hooks é’©å­
  - Vue3.x äº§ç‰©

<!-- more -->

## mixin

**éµå¾ªçš„åŸåˆ™**

- Vue ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼Œä¼šç›´æ¥åˆå¹¶ï¼Œå¦‚createdï¼Œmountedç­‰ï¼Œå¹¶ä¸” Mixins ä¸­é’©å­å‡½æ•°çš„æ‰§è¡Œè¦æ—©äºç»„ä»¶å†…
- methods åŒåæ–¹æ³•ä¼šè¿›è¡Œåˆå¹¶ï¼Œä½†å¦‚æœæ–¹æ³•åå†²çªï¼Œç»„ä»¶å†…æ–¹æ³•å°†è¦†ç›– Mixins ä¸­çš„æ–¹æ³•
- Mixins æ–¹æ³•å’Œå‚æ•°åœ¨ç»„ä»¶é—´ä¸å…±äº«
  - å³æ¯ä¸€ä¸ª component éƒ½æœ‰ä»–ç‹¬ç‰¹çš„ mixins ä½œç”¨åŸŸ
  - ä¿®æ”¹ä¸€ä¸ªä¸ä¼šå½±å“å¦ä¸€ä¸ª

**ä¸¾ä¸ªğŸŒ°**

```js
// test.js
export default {
    created() {
        console.log('è¿™æ˜¯ä»mixé¡µé¢è¾“å‡º');
    },
    mounted() {
        console.log('è¿™æ˜¯ä»mixé¡µé¢mountedè¾“å‡º');
    }
};

// app.vue
export default {
  name: "App",
  mixins: [test],
  created() {
       console.log('è¿™æ˜¯ä»APPé¡µé¢è¾“å‡º');
  },
  mounted() {
      console.log('è¿™æ˜¯ä»APPé¡µé¢mountedè¾“å‡º');
  }
};

// è¾“å‡ºç»“æœ
è¿™æ˜¯ä»mixé¡µé¢è¾“å‡º
è¿™æ˜¯ä»APPé¡µé¢è¾“å‡º
è¿™æ˜¯ä»mixé¡µé¢mountedè¾“å‡º
è¿™æ˜¯ä»APPé¡µé¢mountedè¾“å‡º
```

ä»ä¸Šé¢å¯ä»¥å°è¯ç¬¬ä¸€ç‚¹ï¼Œmixin ä¸­çš„ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°è¦æ—©äºç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ã€‚å’±ä»¬å†çœ‹ä¸‹å¦‚æœ mixin ä¸­å®šä¹‰äº†ç›¸åŒçš„ å˜é‡ æˆ– æ–¹æ³•ï¼ŒVue åˆæ˜¯å¦‚ä½•å¤„ç†çš„ï¼Ÿ

```js
// test.js
export default {
    data() {
        return {
            message: 'mixin-message'
        };
    },
    methods: {
      mixinTest() {
          console.log('mixin');
      }
    }
};

// App.vue
export default {
  name: "App",
  mixins: [test],
  data() {
    return {};
  },
  methods: {
  },
};

// æ¨¡æ¿ ä¼šæ­£å¸¸æ˜¾ç¤º mixin ä¸­çš„ å˜é‡ å’Œ è°ƒç”¨æ–¹æ³•
<template>
  <div id="app">
    {{ message }}<button @click="mixinTest">æŒ‰é’®</button>
  </div>
</template>

// ä¿®æ”¹ App.vue
// ä¿®æ”¹ä¹‹å å°±å˜æˆäº† component ä¸­çš„å˜é‡å’Œæ–¹æ³•
export default {
  name: "App",
  mixins: [test, test2],
  data() {
    return {
        message: 'component-message'
    };
  },
  methods: {
    mixinTest() {
      console.log('component');
    },
  },
};
```

**ç¼ºç‚¹**

é€»è¾‘ä»£ç çš„å¤ç”¨ï¼Œå¯ä»¥å‡å°‘æˆ‘ä»¬é‡å¤å†™ä»£ç ã€‚

ä½†ä½¿ç”¨ mixin æœ€å¤´ç—›çš„è«è¿‡äº`å‘½åé—®é¢˜`ã€‚

- å¦‚æœä¸€æ®µé€»è¾‘ä¸èƒ½åœ¨å¤šä¸ªç»„ä»¶ä¹‹ä¸­è¿›è¡Œå¤ç”¨ï¼Œé‚£ä¹ˆä¹Ÿå°±æ²¡æœ‰æå–çš„å¿…è¦ï¼Œä½†æ°æ°æ˜¯å¤šä¸ªç»„ä»¶çš„å¤ç”¨å°±ä¼šæœ‰å‘½åé—®é¢˜ï¼Œæˆ‘ä»¬çŸ¥é“`æ··å…¥è§„åˆ™`ä¸­ï¼Œ
- å¦‚æœå€¼ä¸ºå¯¹è±¡çš„é€‰é¡¹ï¼Œå‘½åå†²çªæ—¶ç»„ä»¶å†…æ–¹æ³•å°†ä¼šè¦†ç›–æ··å…¥æ–¹æ³•ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬åœ¨å¤šä¸ªç»„ä»¶å¤ç”¨æ—¶ï¼Œç¼–å†™ä»£ç æ›´ä¸ºå›°éš¾ï¼ŒåŒæ—¶å¦‚æœä¸€æ—¦æ”¹åŠ¨ mixin ä¸­çš„ä»£ç ï¼Œé‚£ä¹ˆå¼•ç”¨å¹¶æ··å…¥çš„æ‰€æœ‰ç»„ä»¶éƒ½ä¼šå—åˆ°å½±å“ï¼Œå¯è°“ç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ã€‚

## hooks

**å¯¹æ¯” mixin çš„ä½¿ç”¨æ–¹å¼**

**ä¸¾ä¸ªğŸŒ°**

```js
// src/hooks/useFoo.js
export function useFoo() {
    let message = 'æˆ‘æ˜¯ useFoo ä¸­çš„ message';

    function test() {
        console.log('useFoo çš„ test');
    }
    return {
        message,
        test
    };
}

// App.vue
<script setup>
import { useFoo } from "./hooks/useFoo";
const { message: fooMessage, test } = useFoo();
</script>

<template>{{ fooMessage }}<button @click="test">æŒ‰é’®</button></template>
```

- åœ¨ç»„ä»¶çš„ setup å‡½æ•°ä¸­ä½¿ç”¨
  - const { message, test } = useFoo();
  - è‡ªå®šä¹‰çš„ hooks ä¸€å®šè¦æ˜¯ use å¼€å¤´ï¼
- é‡åæƒ…å†µå¯ä»¥åœ¨ç»„ä»¶ä¸­é‡æ–°å®šä¹‰
  - const { message: fooMessage, test } = useFoo();
  - å½¢å¼ oldName : newName

hook çš„æ–¹å¼è§£å†³äº† mixin çš„æ··å…¥é—®é¢˜ï¼Œå¹¶ä¸”è¯­ä¹‰ä¹Ÿæ›´å‹å¥½ï¼