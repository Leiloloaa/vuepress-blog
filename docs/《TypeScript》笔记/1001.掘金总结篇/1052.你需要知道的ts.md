---
title: ä½ éœ€è¦çŸ¥é“çš„ts
date: 2021-11-04 15:34:40
permalink: /pages/6c52e7/
categories:
  - ã€ŠTypeScriptã€‹ç¬”è®°
  - æ˜é‡‘æ€»ç»“ç¯‡
tags:
  - 
---

# ä½ éœ€è¦çŸ¥é“ TypeScript çš„é‚£äº›äº‹<ä¸‰>

**å†™åœ¨å‰é¢**ï¼šæœ¬æ¬¡ ts ç³»åˆ—æ–‡ç« å…±4ç¯‡ï¼Œä»å…¥é—¨åˆ°"å…¥åœŸ"ç³»åˆ—ï¼Œæœ¬æ–‡ä¸ºç¬¬ä¸‰ç¯‡ï¼Œä¸”æœ¬æ–‡ä»…ä½œä¸ºå­¦ä¹ ç¬”è®°ã€‚

> å°‘å¹´å¸¸å¹´æ¸¸è¡äºæ±Ÿæ¹–ï¼Œå´ä¸æ›¾æ”¾ä¸‹æ‰‹ä¸­ä¹‹ç¬”ï¼Œå› å…¶æ‰€çŸ¥ç”šå°‘ï¼Œå”¯å–„å­¦ï¼

**ä¸Šå›è¯´åˆ°**ï¼šTS æ˜¯ JS çš„`è¶…é›†ï¼ˆåŒ…å«å…³ç³»ï¼‰`ï¼›TS ä¸­å¯¹äºå˜é‡ã€å‡½æ•°æ¥æ”¶å‚æ•°å’Œè¿”å›å‚æ•°ç­‰éƒ½æœ‰ä¸¥æ ¼çš„`ç±»å‹åˆ¤æ–­`ï¼›TS ä¸­ `type ç±»å‹åˆ«å`å’Œ `interface æ¥å£` çš„åŒºåˆ«ï¼Œå¤§ä½“ä¸Šæ²¡æœ‰åŒºåˆ«ï¼Œä½†æ˜¯åœ¨æ‰©å±•ã€ç»§æ‰¿ç­‰æ–¹é¢è¿˜æ˜¯æœ‰äº›å·®å¼‚ï¼›è¯¦æƒ…è¯·æŸ¥çœ‹ï¼š[ç¬¬ä¸€ç¯‡é“¾æ¥](https://juejin.cn/post/7025787233131036686)ï¼›TS ä¸­ç±»å‹æ–­è¨€(as)å’Œ ç±»å‹æ”¶çª„(in\typeof\instanceof)çš„ç”¨æ³•ä»¥åŠæ–‡å­—ç±»å‹å’Œæšä¸¾ç±»å‹ç¤ºä¾‹ï¼›è¯¦æƒ…è¯·æŸ¥çœ‹ï¼š[ç¬¬äºŒç¯‡é“¾æ¥](https://juejin.cn/post/7026166743869423652)ï¼›

**æœ¬æ–‡ä¸»è¦å†…å®¹**ï¼šå‡½æ•°ç›¸å…³çº¦æŸã€æ³›å‹ã€é‡è½½

æœ¬æ–‡é˜…è¯»æ—¶é—´å¤§çº¦ä¸º8åˆ†é’Ÿï¼Œè¯·å¬ç¬”è€…å¨“å¨“é“æ¥ã€‚

<!-- more -->

## å‡½æ•°ç›¸å…³çº¦æŸ

### å‡½æ•°ç±»å‹è¡¨è¾¾å¼

ä¸¾ä¸ªğŸŒ°

```ts
// ä¸¤ä¸ªå‡½æ•°éƒ½é™åˆ¶äº† s çš„ç±»å‹
function greeter(fn: (a: string) => void) {
     // å¦‚æœä¼ å…¥çš„ä¸æ˜¯ string å°±ä¸æŠ¥é”™
    fn("Hello, World");
}
function printToConsole(s: string) {
    console.log(s);
}
greeter(printToConsole);

// å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç±»å‹åˆ«åæ¥å‘½åå‡½æ•°ç±»å‹:
type GreetFunction = (a: string) => void;
function greeter(fn: GreetFunction) {
  // ...
}
```

### è°ƒç”¨ç­¾å

åœ¨ JavaScript ä¸­ï¼Œå‡½æ•°é™¤äº†å¯è°ƒç”¨ä¹‹å¤–ï¼Œè¿˜å¯ä»¥å…·æœ‰å±æ€§ã€‚ä½†æ˜¯ï¼Œå‡½æ•°ç±»å‹è¡¨è¾¾å¼è¯­æ³•ä¸å…è®¸å£°æ˜å±æ€§ã€‚å¦‚æœæˆ‘ä»¬æƒ³ç”¨å±æ€§æ¥æè¿°å¯è°ƒç”¨çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¯¹è±¡ç±»å‹æ¥å†™ä¸€ä¸ªè°ƒç”¨ç­¾å:

ä¸¾ä¸ªğŸŒ°

```ts
type DescribableFunction = {
    description: string;
    (someArg: number): boolean;
};
function doSomething(fn: DescribableFunction) {
    console.log(fn.description + " returned " + fn(6));
}
```

### æ„é€ ç­¾å

å‡½æ•°ä¹Ÿå¯ä»¥ç”¨æ–°çš„æ“ä½œç¬¦æ¥è°ƒç”¨ã€‚å¼•ç”¨è¿™äº›ä½œä¸ºæ„é€ å‡½æ•°ï¼Œå› ä¸ºå®ƒä»¬é€šå¸¸ä¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ã€‚ä½ å¯ä»¥é€šè¿‡åœ¨è°ƒç”¨ç­¾åå‰é¢æ·»åŠ  new å…³é”®å­—æ¥å†™ä¸€ä¸ªæ„é€ ç­¾å:

ä¸¾ä¸ªğŸŒ°

```ts
type SomeConstructor = {
    new (s: string): SomeObject;
};
function fn(ctor: SomeConstructor) {
    return new ctor("hello");
}
```

## æ³›å‹

æ³›å‹ï¼š[generic - é€šç”¨ã€æ³›æŒ‡çš„æ„æ€]ï¼Œé‚£æœ€ç®€å•çš„ç†è§£ï¼Œæ³›å‹å°±æ˜¯æ³›æŒ‡çš„ç±»å‹ã€‚æ³›å‹çš„å®šä¹‰ä½¿ç”¨<>ï¼ˆå°–è§’å·ï¼‰è¿›è¡Œå®šä¹‰çš„ï¼›

ä¸¾ä¸ªğŸŒ°

```ts
// å®šä¹‰ä¸€ä¸ªè”åˆç±»å‹
function join(first: string | number, second: string | number) {
  return `${first}${second}`;
}
join("juejin", ".cn");

// è¿™ä¸ªæ–¹æ³•ç°åœ¨æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œä½†ç°åœ¨æœ‰è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼Œå°±æ˜¯ first å‚æ•°å¦‚æœä¼ çš„æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œè¦æ±‚ second ä¹Ÿä¼ å­—ç¬¦ä¸²ç±»å‹ã€‚åŒç†ï¼Œå¦‚æœæ˜¯ number ç±»å‹ï¼Œå°±éƒ½æ˜¯ number ç±»å‹
function join<T>(first: T, second: T) {
  return `${first}${second}`;
}
// é™åˆ¶äº†äºŒè€…çš„ç±»å‹ å¿…é¡»ç›¸åŒ
join<string>("juejin", ".cn");
join<number>(1, 2);
```

T å¯ä»¥çœ‹æˆä¸€ç§ç‰¹æ®Šçš„æ ‡è¯†ç¬¦ï¼Œä¼ è¿›æ¥æ˜¯ä»€ä¹ˆï¼Œå®ƒå°±å˜æˆä»€ä¹ˆã€‚

### æ³›å‹æ•°ç»„

> å¦‚æœä¼ é€’è¿‡æ¥çš„å€¼è¦æ±‚æ˜¯æ•°å­—ï¼Œå¦‚ä½•ç”¨æ³›å‹è¿›è¡Œå®šä¹‰ä¸¤ç§æ–¹æ³•ï¼Œç¬¬ä¸€ç§æ˜¯ç›´æ¥ä½¿ç”¨[]ï¼Œç¬¬äºŒç§æ˜¯ä½¿ç”¨Array<æ³›å‹>ã€‚å½¢å¼ä¸ä¸€æ ·ï¼Œå…¶ä»–çš„éƒ½ä¸€æ ·ã€‚

ä¸¾ä¸ªğŸŒ°

```ts
function myFun<T>(params: T[]) {
  return params;
}
myFun<string>["123", "456"];
function myFun<T>(params: Array<T>) {
  return params;
}
myFun<string> ["123", "456"];
```

### å¤šä¸ªæ³›å‹å®šä¹‰

ä¸¾ä¸ªğŸŒ°

```ts
function join<T, P>(first: T, second: P) {
  return `${first}${second}`;
}
join <number,string> (1, "2");
```

### æ³›å‹çš„ä½¿ç”¨æ–¹æ³•

ä¸¾ä¸ªğŸŒ°

```ts
class SelectHero<T> {
  constructor(private hero: T[]) {}
  getHero(index: number): T {
    return this.hero[index];
  }
}
const selectHero = new SelectHero(["æ³•å¤–ç‹‚å¾’", "ç–¾é£å‰‘è±ª", "è™šç©ºä¹‹å¥³"]);
console.log(selectHero.getHero(1));
```

### æ³›å‹ä¸­çš„ç»§æ‰¿

ä¸¾ä¸ªğŸŒ°

```ts
interface Hero {
  name: string;
}
class SelectHero<T extends Girl> {
  constructor(private hero: T[]) {}
  getHero(index: number): T {
    return this.hero[index].name;
  }
}
const selectHero = new SelectHero([{name:"æ³•å¤–ç‹‚å¾’"},{name:"ç–¾é£å‰‘è±ª"},{name:"è™šç©ºä¹‹å¥³"}]);
console.log(selectHero.getHero(1));
```

## å‡½æ•°é‡è½½

é‡è½½ï¼šå‡½æ•°åç›¸åŒï¼Œä½†æ˜¯å‚æ•°ä¸ªæ•°æˆ–ç±»å‹ä¸åŒ

ä¸€äº› JavaScript å‡½æ•°å¯ä»¥é€šè¿‡å„ç§å‚æ•°è®¡æ•°å’Œç±»å‹æ¥è°ƒç”¨ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥ç”Ÿæˆä¸€ä¸ªæ¥å—æ—¶é—´æˆ³(ä¸€ä¸ªå‚æ•°)æˆ–æœˆ/æ—¥/å¹´è§„èŒƒ(ä¸‰ä¸ªå‚æ•°)çš„ Dateã€‚

ä¸¾ä¸ªğŸŒ°

```
function makeDate(timestamp: number): Date;
function makeDate(m: number, d: number, y: number): Date;
// ä¸¤ä¸ªå¯é€‰ å¹¶ä¸æ„å‘³ç€ å¯ä»¥ä¼  2 ä¸ªå‚æ•° æˆ‘ä»¬éœ€è¦ä¼ å…¥ 1 æˆ– 3 ä¸ªå‚æ•°
function makeDate(mOrTimestamp: number, d?: number, y?: number): Date {
    if (d !== undefined && y !== undefined) {
        return new Date(y, mOrTimestamp, d);
    } else {
        return new Date(mOrTimestamp);
    }
}
const d1 = makeDate(12345678);
const d2 = makeDate(5, 5, 5);
const d3 = makeDate(1, 3);
// No overload expects 2 arguments, but overloads do exist that expect either 1 or 3 arguments.
```

## æ€»ç»“

è·¯æ¼«æ¼«å…¶ä¿®è¿œå…®ï¼Œå¾å°†ä¸Šä¸‹è€Œæ±‚ç´¢ã€‚æœ¬æ–‡ä¸»è¦è®²è¿°äº†å‡½æ•°ç›¸å…³çº¦æŸã€æ³›å‹å’Œé‡è½½ä¸€äº›ç”¨æ³•ã€‚å…¶ä¸­ï¼Œæ³›å‹æ˜¯é‡ç‚¹ï¼Œä¸€å®šè¦å¥½å¥½æŠŠæ¡ï¼å¦‚æœ‰ä¸å½“ä¹‹å¤„ï¼Œè¯·ä¸åèµæ•™ã€‚æœ€åï¼Œç¬”è€…è¿‘æœŸåŠ å…¥äº† mini-vue ä½œè€…åˆ›å»ºçš„ ts å­¦ä¹ å°ç»„ï¼Œå…±åŒå­¦ä¹ ã€‚æœ‰å…´è¶£çš„è¯ï¼Œæ‹‰ä½ å…¥ç¾¤ã€‚ä¹‹åè¿˜ä¼šæœ‰å¤šç§å½¢å¼çš„å¯¹èµŒå­¦ä¹ å“¦ï¼
