---
title: 3月准备-Vue
date: 2022-02-10 15:50:04
permalink: /pages/094acc/
categories:
  - 面试
tags:
  - 
---

# Vue

## Vue3

### Vue3 设计目标

**更小、更快、更友好、优化方案**

Vue2 的痛点：
- 随着功能的增长，复杂组件的代码变得越来越难以维护
- 缺少一种比较「干净」的在多个组件之间提取和复用逻辑的机制
- 类型推断不够友好
- `bundle`的时间太久了

Vue3 的优势：
- options API 改成 composition(组合) API，解决了上下反复横跳的问题
- 使用 hooks 替换 mixin
- 引入的 typescript
- 引入tree-shaking，没用到的模块都被摇掉，仅打包需要的，使打包的整体体积变小了
- 编译方面
  - diff算法优化
  - 静态提升
  - 事件监听缓存
  - SSR 优化

**优化方案**

一切都是以性能为前提的最优方案，大体分成三个方面

- 源码
  - 通过 monorepo 的方式维护，模块拆分更细化，职责划分更明确，另外一些 package（比如 reactivity 响应式库）是可以独立于 Vue 使用的。
- 性能
  - 体积优化
  - 编译优化
  - 数据劫持优化
    - 使用 Proxy 替换 Object.defineProperty
- 语法 API
  - 优化逻辑组织
    - composition API
  - 优化逻辑复用
    - 使用 hooks 替换 mixin
    - mixin 带来的问题：命名冲突和数据来源不清晰

## Vue2