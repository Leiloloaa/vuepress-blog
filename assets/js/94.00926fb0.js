(window.webpackJsonp=window.webpackJsonp||[]).push([[94],{553:function(t,s,a){"use strict";a.r(s);var n=a(35),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"vue"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue"}},[t._v("#")]),t._v(" Vue")]),t._v(" "),a("h2",{attrs:{id:"vue3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue3"}},[t._v("#")]),t._v(" Vue3")]),t._v(" "),a("h3",{attrs:{id:"vue3-设计目标是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue3-设计目标是什么"}},[t._v("#")]),t._v(" Vue3 设计目标是什么？")]),t._v(" "),a("p",[a("strong",[t._v("更小、更快、更友好、优化方案")])]),t._v(" "),a("p",[t._v("Vue2 的痛点：")]),t._v(" "),a("ul",[a("li",[t._v("随着功能的增长，复杂组件的代码变得越来越难以维护")]),t._v(" "),a("li",[t._v("缺少一种比较「干净」的在多个组件之间提取和复用逻辑的机制")]),t._v(" "),a("li",[t._v("类型推断不够友好")]),t._v(" "),a("li",[a("code",[t._v("bundle")]),t._v("的时间太久了")])]),t._v(" "),a("p",[t._v("Vue3 的优势：")]),t._v(" "),a("ul",[a("li",[t._v("options API 改成 composition(组合) API，解决了上下反复横跳的问题\n"),a("ul",[a("li",[t._v("Composition API 更符合高内聚，低耦合")])])]),t._v(" "),a("li",[t._v("使用 hooks 替换 mixin")]),t._v(" "),a("li",[t._v("引入的 typescript")]),t._v(" "),a("li",[t._v("引入tree-shaking，没用到的模块都被摇掉，仅打包需要的，使打包的整体体积变小了")]),t._v(" "),a("li",[t._v("编译方面\n"),a("ul",[a("li",[t._v("diff算法优化")]),t._v(" "),a("li",[t._v("静态提升")]),t._v(" "),a("li",[t._v("事件监听缓存")]),t._v(" "),a("li",[t._v("SSR 优化")])])])]),t._v(" "),a("p",[a("strong",[t._v("优化方案")])]),t._v(" "),a("p",[t._v("一切都是以性能为前提的最优方案，大体分成三个方面")]),t._v(" "),a("ul",[a("li",[t._v("源码\n"),a("ul",[a("li",[t._v("通过 monorepo 的方式维护，模块拆分更细化，职责划分更明确，另外一些 package（比如 reactivity 响应式库）是可以独立于 Vue 使用的。")])])]),t._v(" "),a("li",[t._v("性能\n"),a("ul",[a("li",[t._v("体积优化")]),t._v(" "),a("li",[t._v("编译优化")]),t._v(" "),a("li",[t._v("数据劫持优化\n"),a("ul",[a("li",[t._v("使用 Proxy 替换 Object.defineProperty")])])])])]),t._v(" "),a("li",[t._v("语法 API\n"),a("ul",[a("li",[t._v("优化逻辑组织\n"),a("ul",[a("li",[t._v("composition API")])])]),t._v(" "),a("li",[t._v("优化逻辑复用\n"),a("ul",[a("li",[t._v("使用 hooks 替换 mixin")]),t._v(" "),a("li",[t._v("mixin 带来的问题：命名冲突和数据来源不清晰")])])])])])]),t._v(" "),a("h3",{attrs:{id:"vue3-性能提升主要是通过哪几方面体现的"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue3-性能提升主要是通过哪几方面体现的"}},[t._v("#")]),t._v(" Vue3 性能提升主要是通过哪几方面体现的？")]),t._v(" "),a("ul",[a("li",[t._v("编译阶段做了优化")]),t._v(" "),a("li",[t._v("源码体积缩小了")]),t._v(" "),a("li",[t._v("响应式原理实现方式改变了")])]),t._v(" "),a("p",[a("strong",[t._v("编译阶段")])]),t._v(" "),a("ul",[a("li",[t._v("diff 算法优化\n"),a("ul",[a("li",[t._v("增加了静态标记")]),t._v(" "),a("li",[t._v("PatchFlags 枚举了多种类型")]),t._v(" "),a("li",[t._v("Patch 的时候使用位运算，进一步提高性能")])])]),t._v(" "),a("li",[t._v("静态提升\n"),a("ul",[a("li",[t._v("不参与更新的元素，会静态提升，只会创建一次，渲染的时候复用")]),t._v(" "),a("li",[t._v("更新会调用 render 函数，放置在 render 函数之外即可")])])]),t._v(" "),a("li",[t._v("事件监听缓存\n"),a("ul",[a("li",[t._v("默认情况下绑定事件行为会被视为动态绑定，所以每次都会去追踪它的变化")]),t._v(" "),a("li",[t._v("开启事件监听缓存后，没有了静态标记，diff 的时候就可以直接使用")])])]),t._v(" "),a("li",[t._v("SSR 优化\n"),a("ul",[a("li",[t._v("当静态内容大到一定量级时候，会用createStaticVNode方法在客户端去生成一个static node，这些静态node，会被直接innerHtml，就不需要创建对象，然后根据对象渲染")])])])]),t._v(" "),a("p",[a("strong",[t._v("源码体积")])]),t._v(" "),a("ul",[a("li",[t._v("移除了一些不常用的 API")]),t._v(" "),a("li",[t._v("Tree Shanking 对于任何一个函数，仅仅在用到的时候才会打包，没用到的模块都会被摇调")])]),t._v(" "),a("p",[a("strong",[t._v("响应式系统")])]),t._v(" "),a("ul",[a("li",[t._v("Vue2 采用 defineProperty 来劫持整个对象，然后进行深度的遍历，给每个属性添加 getter 和 setter，实现响应式")]),t._v(" "),a("li",[t._v("Vue3 采用 proxy 重写了响应式系统，因为 proxy 可以对整个对象进行监听")])]),t._v(" "),a("h3",{attrs:{id:"vue3-为什么要用-proxy-api-替代-defineproperty-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue3-为什么要用-proxy-api-替代-defineproperty-api"}},[t._v("#")]),t._v(" Vue3 为什么要用 Proxy API 替代 defineProperty API?")]),t._v(" "),a("ul",[a("li",[t._v("defineProperty 存在以下问题\n"),a("ul",[a("li",[t._v("检测不到对象属性的添加和删除")]),t._v(" "),a("li",[t._v("数组"),a("code",[t._v("API")]),t._v("方法无法监听到")]),t._v(" "),a("li",[t._v("需要对每个属性进行遍历监听，如果嵌套对象，需要深层监听，会造成性能问题")])])]),t._v(" "),a("li",[t._v("Proxy 的优势\n"),a("ul",[a("li",[t._v("可以直接监听对象和数组")]),t._v(" "),a("li",[t._v("多达 13 种拦截方法")]),t._v(" "),a("li",[t._v("返回一个新的对象，defineProperty 是直接修改")])])])]),t._v(" "),a("p",[t._v("Proxy 的劣势就是 IE9 以下不支持，但是随着时间的推进相信兼容性会越来越好。")]),t._v(" "),a("p",[a("strong",[t._v("defineProperty 实现原理")])]),t._v(" "),a("ul",[a("li",[t._v("定义："),a("code",[t._v("Object.defineProperty()")]),t._v("方法会直接在一个对象上定义一个新属性，或者修改一个对象的现有属性，并返回此对象")]),t._v(" "),a("li",[t._v("如何实现响应式：通过"),a("code",[t._v("defineProperty")]),t._v("两个属性，"),a("code",[t._v("get")]),t._v("及"),a("code",[t._v("set")])])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineReactive")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" val")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineProperty")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("get ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("val"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" val\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newVal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newVal "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" val"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          val "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newVal\n          "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br")])]),a("p",[a("strong",[t._v("Proxy 实现原理")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactive")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("obj")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" obj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'object'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" obj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" obj\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Proxy相当于在对象外层加拦截")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" observed "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Proxy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" receiver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" res "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Reflect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" receiver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("获取")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("res"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" res\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" receiver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" res "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Reflect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" receiver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("设置")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" res\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("deleteProperty")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" res "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Reflect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("deleteProperty")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("删除")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("res"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" res\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" observed\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br")])]),a("h3",{attrs:{id:"vue3-中-treeshaking-特性-举例说明一下"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue3-中-treeshaking-特性-举例说明一下"}},[t._v("#")]),t._v(" Vue3 中 TreeShaking 特性？举例说明一下？")]),t._v(" "),a("p",[a("code",[t._v("tree shaking")]),t._v(" 目的就是找出使用的代码，摇掉不需要的")]),t._v(" "),a("p",[t._v("在"),a("code",[t._v("Vue2")]),t._v("中，无论我们使用什么功能，它们最终都会出现在生产代码中。主要原因是"),a("code",[t._v("Vue")]),t._v("实例在项目中是"),a("code",[t._v("单例")]),t._v("的，捆绑程序无法检测到该对象的哪些属性在代码中被使用到")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Vue "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),t._v("\nVue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextTick")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("而"),a("code",[t._v("Vue3")]),t._v("源码引入"),a("code",[t._v("tree shaking")]),t._v("特性，将全局 API 进行分块。如果您不使用其某些功能，它们将不会包含在您的基础包中")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" nextTick "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextTick")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[a("code",[t._v("tree shaking")]),t._v("是基于"),a("code",[t._v("ES6")]),t._v("模板语法（"),a("code",[t._v("import")]),t._v("与"),a("code",[t._v("exports")]),t._v("），主要是借助"),a("code",[t._v("ES6")]),t._v("模块的静态编译思想，在编译时就能确定模块的依赖关系，以及输入和输出的变量")]),t._v(" "),a("p",[a("code",[t._v("tree shaking")]),t._v("无非就是做了两件事：")]),t._v(" "),a("ul",[a("li",[t._v("编译阶段利用"),a("code",[t._v("ES6 Module")]),t._v("判断哪些模块已经加载")]),t._v(" "),a("li",[t._v("判断那些模块和变量未被使用或者引用，进而删除对应代码")])]),t._v(" "),a("p",[t._v("通过"),a("code",[t._v("tree shaking")]),t._v("，"),a("code",[t._v("Vue3")]),t._v("给我们带来的好处是：")]),t._v(" "),a("ul",[a("li",[t._v("减少程序体积（更小）")]),t._v(" "),a("li",[t._v("减少程序执行时间（更快）")]),t._v(" "),a("li",[t._v("便于将来对程序架构进行优化（更友好）")])]),t._v(" "),a("h3",{attrs:{id:"vue-3-x-需要-react-的-fiber-吗"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-3-x-需要-react-的-fiber-吗"}},[t._v("#")]),t._v(" Vue 3.X 需要 React 的 Fiber 吗?")]),t._v(" "),a("blockquote",[a("p",[t._v("vue 的 diff 被限制在组件级，这样每次变化影响的只是一颗子树，相对范围较小。所以 fiber 带来的收益似乎也会降低，fiber 要改架构还可能破坏目前稳定的表现。因此不需要。")])]),t._v(" "),a("p",[t._v("虚拟 Dom 控制在组件级，最早 Vue3 的提案其实是包含时间切片方案的，最后废弃的主要原因，是时间切片解决的的问题，Vue3 基本碰不到")]),t._v(" "),a("ol",[a("li",[t._v("Vue3 把虚拟 Dom 控制在组件级别，组件之间使用响应式，这就让 Vue3 的虚拟 Dom 不会过于庞大")]),t._v(" "),a("li",[t._v("Vue3 虚拟 Dom 的静态标记和自动缓存功能，让静态的节点和属性可以直接绕过 Diff 逻辑，也大大减少了虚拟 Dom 的 Diff 事件")]),t._v(" "),a("li",[t._v("时间切片也会带来额外的系统复杂性")])]),t._v(" "),a("p",[t._v("所以引入时间切片对于 Vue3 来说投入产出比不太理想，在后来的讨论中，Vue3 的时间切片方案就被废弃了")]),t._v(" "),a("h2",{attrs:{id:"vue2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue2"}},[t._v("#")]),t._v(" Vue2")]),t._v(" "),a("h3",{attrs:{id:"说说你对-vue-的看法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#说说你对-vue-的看法"}},[t._v("#")]),t._v(" 说说你对 Vue 的看法？")]),t._v(" "),a("p",[t._v("Web 技术的变化之大与快，每一种新的技术出现都是一些特定场景的解决方案。Vue 旨在更好地组织与简化 Web 开发，其作者也是吸取了 AngularJS 以及其他优秀框架的一些特性，慢慢演变而来的。")]),t._v(" "),a("p",[a("strong",[t._v("Vue 核心特性")])]),t._v(" "),a("ul",[a("li",[t._v("数据驱动 MVVM")]),t._v(" "),a("li",[t._v("组件化\n"),a("ul",[a("li",[t._v("降低系统的耦合度")]),t._v(" "),a("li",[t._v("调试方便")]),t._v(" "),a("li",[t._v("提高可维护性")])])]),t._v(" "),a("li",[t._v("指令系统\n"),a("ul",[a("li",[t._v("v-if、v-bind、v-model 等\n"),a("ul",[a("li",[t._v("2.x 版本中在一个元素上同时使用 v-if 和 v-for 时，v-for 会优先作用")]),t._v(" "),a("li",[t._v("3.x 版本中 v-if 总是优先于 v-for 生效")])])])])])]),t._v(" "),a("p",[a("strong",[t._v("Vue 和 React 对比")])]),t._v(" "),a("p",[t._v("这里就做几个简单的类比吧，当然没有好坏之分，只是使用场景不同")]),t._v(" "),a("p",[t._v("相同点")]),t._v(" "),a("ul",[a("li",[t._v("都有组件化思想")]),t._v(" "),a("li",[t._v("都支持服务器端渲染")]),t._v(" "),a("li",[t._v("都有Virtual DOM（虚拟dom）")]),t._v(" "),a("li",[t._v("数据驱动视图")]),t._v(" "),a("li",[t._v("都有支持native的方案：Vue 的 Weex、React 的 React Native")]),t._v(" "),a("li",[t._v("都有自己的构建工具：Vue 的 vue-cli、React 的 Create React App")])]),t._v(" "),a("p",[t._v("区别")]),t._v(" "),a("ul",[a("li",[t._v("数据变化的实现原理不同。react 使用的是不可变数据，而 Vue 使用的是可变的数据")]),t._v(" "),a("li",[t._v("diff算法不同。react 主要使用 diff 队列保存需要更新哪些 DOM，得到 patch 树，再统一操作批量更新 DOM，使用的是仅右移策略。Vue 使用双端对比加最长递增子序列，尽可能减少移动")]),t._v(" "),a("li",[t._v("组件化通信的不同。react 中我们通过使用回调函数来进行通信的，而 Vue 中子组件向父组件传递消息有两种方式：事件和回调函数")])]),t._v(" "),a("h3",{attrs:{id:"vue-是-spa-单页面-说说你的理解以及它的优缺点分别是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-是-spa-单页面-说说你的理解以及它的优缺点分别是什么"}},[t._v("#")]),t._v(" Vue 是 SPA 单页面，说说你的理解以及它的优缺点分别是什么？")]),t._v(" "),a("p",[t._v("SPA(single-page application)仅在 Web 页面初始化时加载相应的 HTML、JavaScript 和 CSS。一旦页面加载完成，SPA 不会因为用户的操作而进行页面的重新加载或跳转；取而代之的是利用路由机制实现 HTML 内容的变换，UI 与用户的交互，避免页面的重新加载。")]),t._v(" "),a("p",[t._v("优点：")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("用户体验好、快")]),t._v("，内容的改变不需要重新加载整个页面，避免了不必要的跳转和重复渲染；")]),t._v(" "),a("li",[t._v("基于上面一点，"),a("strong",[t._v("SPA 相对对服务器压力小")]),t._v("；")]),t._v(" "),a("li",[t._v("前后端职责分离，架构清晰，前端进行交互逻辑，后端负责数据处理；")])]),t._v(" "),a("p",[t._v("缺点：")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("初次加载耗时多")]),t._v("：为实现单页 Web 应用功能及显示效果，需要在加载页面的时候将 JavaScript、CSS 统一加载，部分页面按需加载；")]),t._v(" "),a("li",[t._v("前进后退路由管理：由于单页应用在一个页面中显示所有的内容，所以不能使用浏览器的前进后退功能，所有的页面切换需要自己建立堆栈管理；")]),t._v(" "),a("li",[a("strong",[t._v("不利于 SEO 引擎搜索")]),t._v("：由于所有的内容都在一个页面中动态替换显示，所以在 SEO 上其有着天然的弱势。")])]),t._v(" "),a("p",[a("strong",[t._v("如何优化 SPA 应用的首屏加载速度慢的问题")])]),t._v(" "),a("ul",[a("li",[t._v("CDN 引用共用库")]),t._v(" "),a("li",[t._v("组件和路由懒加载")]),t._v(" "),a("li",[t._v("骨架屏、loading")])]),t._v(" "),a("p",[t._v("将公用的 JS 库通过 script 标签外部引入(CDN 的方式)，减小 app.bundle 的大小，让浏览器并行下载资源文件，提高下载速度；在配置路由时，页面和组件使用懒加载的方式引入，进一步缩小 app.bundle 的体积，在调用某个组件时再加载对应的js文件；加一个首屏 loading 图，提升用户体验；")]),t._v(" "),a("h3",{attrs:{id:"vue2-的响应式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue2-的响应式"}},[t._v("#")]),t._v(" Vue2 的响应式？")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://198.52.110.135/images/vue/Vue2%E5%93%8D%E5%BA%94%E5%BC%8F.png",alt:""}})]),t._v(" "),a("p",[a("strong",[t._v("Vue3 的响应式")])]),t._v(" "),a("p",[t._v("proxy 实现对象的真正的代理，能监听增加以及删除。首先是通过 reactive 定义，然后通过 effect 接收一个函数，get 的时候收集依赖，set 的时候触发依赖，完成响应式的自动更新。并且内部是通过 targetsMap 收集全局的依赖，再通过一个 depsMap 收集每个响应式对象，depsMap 里面再通过 dep 一个 set 集合收集每个响应式对象中的每个属性。")]),t._v(" "),a("h3",{attrs:{id:"vue2-组件间通信方式都有哪些"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue2-组件间通信方式都有哪些"}},[t._v("#")]),t._v(" Vue2 组件间通信方式都有哪些?")]),t._v(" "),a("p",[a("strong",[t._v("8 种常规的通信方案")])]),t._v(" "),a("ul",[a("li",[t._v("通过 props 传递\n"),a("ul",[a("li",[t._v("父组件传递数据给子组件")])])]),t._v(" "),a("li",[t._v("通过"),a("code",[t._v("$emit")]),t._v("触发自定义事件\n"),a("ul",[a("li",[t._v("子组件传递数据给父组件")])])]),t._v(" "),a("li",[t._v("使用 ref\n"),a("ul",[a("li",[t._v("父组件在使用子组件的时候设置 ref")]),t._v(" "),a("li",[t._v("父组件通过设置子组件 ref 来获取数据")])])]),t._v(" "),a("li",[t._v("EventBus\n"),a("ul",[a("li",[t._v("兄弟组件传值")]),t._v(" "),a("li",[t._v("创建一个中央时间总线 EventBus")]),t._v(" "),a("li",[t._v("兄弟组件通过"),a("code",[t._v("$emit")]),t._v("触发自定义事件，"),a("code",[t._v("$emit")]),t._v("第二个参数为传递的数值")]),t._v(" "),a("li",[t._v("另一个兄弟组件通过"),a("code",[t._v("$on")]),t._v("监听自定义事件")])])]),t._v(" "),a("li",[a("code",[t._v("$parent")]),t._v("或"),a("code",[t._v("$children")])]),t._v(" "),a("li",[t._v("attrs 与 listeners\n"),a("ul",[a("li",[t._v("祖先传递数据给子孙")])])]),t._v(" "),a("li",[t._v("Provide 与 Inject\n"),a("ul",[a("li",[t._v("祖先传递数据给子孙")])])]),t._v(" "),a("li",[t._v("Vuex\n"),a("ul",[a("li",[t._v("复杂关系的组件数据传递")])])])]),t._v(" "),a("h3",{attrs:{id:"谈谈你对-vue-生命周期的理解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#谈谈你对-vue-生命周期的理解"}},[t._v("#")]),t._v(" 谈谈你对 Vue 生命周期的理解？")]),t._v(" "),a("p",[a("strong",[t._v("生命周期是什么？")])]),t._v(" "),a("p",[t._v("Vue 实例有一个完整的生命周期，也就是从开始创建、初始化数据、编译模版、挂载 Dom -> 渲染、更新 -> 渲染、卸载等一系列过程，我们称这是 Vue 的生命周期。")]),t._v(" "),a("p",[a("strong",[t._v("Vue2 的生命周期")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("生命周期")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("beforeCreate")]),t._v(" "),a("td",[t._v("组件实例被创建之初，组件的属性生效之前")])]),t._v(" "),a("tr",[a("td",[t._v("created")]),t._v(" "),a("td",[t._v("组件实例已经完全创建，属性也绑定，但真实 dom 还没有生成，$el 还不可用")])]),t._v(" "),a("tr",[a("td",[t._v("beforeMount")]),t._v(" "),a("td",[t._v("在挂载开始之前被调用：相关的 render 函数首次被调用")])]),t._v(" "),a("tr",[a("td",[t._v("mounted")]),t._v(" "),a("td",[t._v("el 被新创建的 vm.$el 替换，并挂载到实例上去之后调用该钩子")])]),t._v(" "),a("tr",[a("td",[t._v("beforeUpdate")]),t._v(" "),a("td",[t._v("组件数据更新之前调用，发生在虚拟 DOM 打补丁之前")])]),t._v(" "),a("tr",[a("td",[t._v("update")]),t._v(" "),a("td",[t._v("组件数据更新之后")])]),t._v(" "),a("tr",[a("td",[t._v("activated")]),t._v(" "),a("td",[t._v("keep-alive 专属，组件被激活时调用")])]),t._v(" "),a("tr",[a("td",[t._v("deactivated")]),t._v(" "),a("td",[t._v("keep-alive 专属，组件被销毁时调用")])]),t._v(" "),a("tr",[a("td",[t._v("beforeDestroy")]),t._v(" "),a("td",[t._v("组件销毁前调用")])]),t._v(" "),a("tr",[a("td",[t._v("destroyed")]),t._v(" "),a("td",[t._v("组件销毁后调用")])])])]),t._v(" "),a("p",[a("strong",[t._v("Vue3 的生命周期")])]),t._v(" "),a("p",[t._v("除了 beforeCreate 和 created(它们被 setup 方法本身所取代)，我们可以在 setup 方法中访问的 API 生命周期钩子有9个选项:")]),t._v(" "),a("p",[t._v("onBeforeMount – 在挂载开始之前被调用：相关的 render 函数首次被调用。\nonMounted – 组件挂载时调用\nonBeforeUpdate – 数据更新时调用，发生在虚拟 DOM 打补丁之前。这里适合在更新之前访问现有的 DOM，比如手动移除已添加的事件监听器。\nonUpdated – 由于数据更改导致的虚拟 DOM 重新渲染和打补丁，在这之后会调用该钩子。\nonBeforeUnmount – 在卸载组件实例之前调用。在这个阶段，实例仍然是完全正常的。\nonUnmounted – 卸载组件实例后调用。调用此钩子时，组件实例的所有指令都被解除绑定，所有事件侦听器都被移除，所有子组件实例被卸载。\nonActivated – 被 keep-alive 缓存的组件激活时调用。\nonDeactivated – 被 keep-alive 缓存的组件停用时调用。\nonErrorCaptured – 当捕获一个来自子孙组件的错误时被调用。此钩子会收到三个参数：错误对象、发生错误的组件实例以及一个包含错误来源信息的字符串。此钩子可以返回 false 以阻止该错误继续向上传播。")]),t._v(" "),a("p",[a("strong",[t._v("比较")])]),t._v(" "),a("p",[t._v("beforeCreate -> 使用 setup()\ncreated -> 使用 setup()\nbeforeMount -> onBeforeMount\nmounted -> onMounted\nbeforeUpdate -> onBeforeUpdate\nupdated -> onUpdated\nbeforeDestroy -> onBeforeUnmount\ndestroyed -> onUnmounted\nerrorCaptured -> onErrorCaptured")]),t._v(" "),a("h3",{attrs:{id:"在哪个生命周期内调用异步请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在哪个生命周期内调用异步请求"}},[t._v("#")]),t._v(" 在哪个生命周期内调用异步请求？")]),t._v(" "),a("p",[t._v("可以在钩子函数 created、beforeMount、mounted 中进行调用，因为在这三个钩子函数中，data 已经创建，可以将服务端端返回的数据进行赋值。但是本人推荐在 created 钩子函数中调用异步请求，因为在 created 钩子函数中调用异步请求有以下优点：")]),t._v(" "),a("ul",[a("li",[t._v("能更快获取到服务端数据，减少页面 loading 时间；")]),t._v(" "),a("li",[t._v("ssr 不支持 beforeMount 、mounted 钩子函数，所以放在 created 中有助于一致性；")])]),t._v(" "),a("h3",{attrs:{id:"在什么阶段才能访问操作-dom"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在什么阶段才能访问操作-dom"}},[t._v("#")]),t._v(" 在什么阶段才能访问操作 DOM？")]),t._v(" "),a("p",[t._v("在钩子函数 mounted 被调用前，Vue 已经将编译好的模板挂载到页面上，所以在 mounted 中可以访问操作 DOM。")]),t._v(" "),a("h3",{attrs:{id:"computed-和-watch-的区别和运用的场景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#computed-和-watch-的区别和运用的场景"}},[t._v("#")]),t._v(" computed 和 watch 的区别和运用的场景？")]),t._v(" "),a("p",[a("strong",[t._v("computed")]),t._v("： 是计算属性，依赖其它属性值，并且 computed 的值有缓存，只有它依赖的属性值发生改变，下一次获取 computed 的值时才会重新计算 computed  的值；\n"),a("strong",[t._v("watch")]),t._v("： 更多的是「观察」的作用，类似于某些数据的监听回调 ，每当监听的数据变化时都会执行回调进行后续操作；")]),t._v(" "),a("p",[t._v("运用场景：")]),t._v(" "),a("ul",[a("li",[t._v("当我们需要进行数值计算，并且依赖于其它数据时，应该使用 computed，因为可以利用 computed 的缓存特性，避免每次获取值时，都要重新计算；")]),t._v(" "),a("li",[t._v("当我们需要在数据变化时执行异步或开销较大的操作时，应该使用 watch，使用 watch 选项允许我们执行异步操作 ( 访问一个 API )，限制我们执行该操作的频率，并在我们得到最终结果前，设置中间状态。这些都是计算属性无法做到的。")])]),t._v(" "),a("h3",{attrs:{id:"谈谈你对-keep-alive-的了解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#谈谈你对-keep-alive-的了解"}},[t._v("#")]),t._v(" 谈谈你对 keep-alive 的了解？")]),t._v(" "),a("p",[a("strong",[t._v("keep-alive 是 Vue 内置的一个组件，可以使被包含的组件保留状态，避免重新渲染")]),t._v("，其有以下特性：")]),t._v(" "),a("ul",[a("li",[t._v("一般结合路由和动态组件一起使用，用于缓存组件；")]),t._v(" "),a("li",[t._v("提供 include 和 exclude 属性，两者都支持字符串或正则表达式， include 表示只有名称匹配的组件会被缓存，exclude 表示任何名称匹配的组件都不会被缓存 ，其中 exclude 的优先级比 include 高；")]),t._v(" "),a("li",[t._v("对应两个钩子函数 activated 和 deactivated ，当组件被激活时，触发钩子函数 activated，当组件被移除时，触发钩子函数 deactivated；")])]),t._v(" "),a("h3",{attrs:{id:"组件中-data-为什么是一个函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件中-data-为什么是一个函数"}},[t._v("#")]),t._v(" 组件中 data 为什么是一个函数？")]),t._v(" "),a("blockquote",[a("p",[t._v("为什么组件中的 data 必须是一个函数，然后 return 一个对象，而 new Vue 实例里，data 可以直接是一个对象？")])]),t._v(" "),a("ul",[a("li",[t._v("组件是可复用得，且对象是"),a("strong",[t._v("引用关系")])]),t._v(" "),a("li",[t._v("要保证作用域的隔离")])]),t._v(" "),a("p",[t._v("因为组件是用来复用的，且 JS 里对象是"),a("code",[t._v("引用关系")]),t._v("，如果组件中 data 是一个对象，那么这样作用域没有隔离，子组件中的 data 属性值会相互影响，如果组件中 data 选项是一个函数，那么每个实例可以维护一份被返回对象的独立的拷贝，组件实例之间的 data 属性值不会互相影响；而 new Vue 的实例，是不会被复用的，因此不存在引用对象的问题。")]),t._v(" "),a("h3",{attrs:{id:"vue2-中是否能在-data-里面直接使用-prop-的值-为什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue2-中是否能在-data-里面直接使用-prop-的值-为什么"}},[t._v("#")]),t._v(" Vue2 中是否能在 data 里面直接使用 prop 的值 为什么？")]),t._v(" "),a("p",[t._v("可以在 data 中使用 prop 的值，因为 vue 初始化的时候 prop > methods > data > computed > watch，prop 是最新初始化的")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("initState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("vm")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取传入的数据对象")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" opts "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" vm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("initProps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("methods"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("initMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("initData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("computed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("initComputed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("watch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("initWatch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br")])]),a("h3",{attrs:{id:"router-和-route-是什么关系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#router-和-route-是什么关系"}},[t._v("#")]),t._v(" router 和 route 是什么关系")]),t._v(" "),a("ul",[a("li",[t._v("this.$route：当前激活的路由的信息对象。每个对象都是局部的，可以获取当前路由的 path, name, params, query 等属性。")]),t._v(" "),a("li",[t._v("this.$router：全局的 router 实例。通过 vue 根实例中注入 router 实例，然后再注入到每个子组件，从而让整个应用都有路由功能。其中包含了很多属性和对象（比如 history 对象），任何页面也都可以调用其 push(), replace(), go() 等方法。")])])])}),[],!1,null,null,null);s.default=e.exports}}]);