(window.webpackJsonp=window.webpackJsonp||[]).push([[134],{593:function(s,t,a){"use strict";a.r(t);var n=a(35),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"vue3-源码调试教程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue3-源码调试教程"}},[s._v("#")]),s._v(" vue3 源码调试教程")]),s._v(" "),a("blockquote",[a("p",[s._v("why: 为什么要学会 Vue3 源码调试？")])]),s._v(" "),a("blockquote",[a("p",[s._v("在学习 Vue3 源码的时候，单纯的看代码，很容易看不下去，也会衔接不上作者的开发思路。所以，作者在每个功能模块的目录下提供了测试文件。我们在调试源码的时候，可以根据作者提供的测试套件，在相应的位置上打上断点，这样就能充分的理解实现思路。")])]),s._v(" "),a("blockquote",[a("p",[s._v("why: 为什么我下载完 Vue3 源码，然后 pnpm install 后，在测试套件里面运行测试 case 跑不起来？")])]),s._v(" "),a("p",[s._v("那是因为你打开的方式不对，继续往下阅读吧！保管你能够掌握调试的步骤")]),s._v(" "),a("h2",{attrs:{id:"使用-javascript-debug-terminal-窗口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-javascript-debug-terminal-窗口"}},[s._v("#")]),s._v(" 使用 JavaScript Debug Terminal 窗口")]),s._v(" "),a("p",[s._v("在 terminal 窗口左上角 加号旁边的下拉项中选中 avaScript Debug Terminal")]),s._v(" "),a("p",[s._v("和正常使用的 terminal 使用是一样的，只不过敲了命令之后就可以进入 debug 模式")]),s._v(" "),a("ul",[a("li",[s._v("打开一个新的黑窗口，并且在相应的 xxx.spec.ts 里面打好断点")]),s._v(" "),a("li",[s._v("运行 pnpm test xxx.spec 就会自动进入打了断点的位置")])]),s._v(" "),a("p",[s._v("打开 setting 加上 ctrl+c 配置关闭调试模式")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"debug.javascript.terminalOptions"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"skipFiles"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"<node_internals>/**"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"launch-json"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#launch-json"}},[s._v("#")]),s._v(" launch.json")]),s._v(" "),a("ul",[a("li",[s._v("修改 vscode 中的 launch 文件")]),s._v(" "),a("li",[s._v("去官网查到配置后，修改\n"),a("ul",[a("li",[s._v("找到 debugger "),a("a",{attrs:{href:"https://cn.vitest.dev/guide/debugging.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("配置项"),a("OutboundLink")],1)])])]),s._v(" "),a("li",[s._v("配置完成后，只要按下 F5 就可以进入 debugger 模式\n"),a("ul",[a("li",[s._v("注意 vscode 左侧栏的 debug 模式要选择 debug current test file")])])])]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 想了解更多的信息, 请访问：https://go.microsoft.com/fwlink/?linkid=830387")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.2.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"configurations"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"request"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"launch"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Debug Current Test File"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"autoAttachChildProcesses"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"skipFiles"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"<node_internals>/**"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"**/node_modules/**"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"program"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${workspaceRoot}/node_modules/vitest/vitest.mjs"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"args"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"run"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${relativeFile}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"smartStep"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"console"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"integratedTerminal"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("h2",{attrs:{id:"vitest-插件-快捷键"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vitest-插件-快捷键"}},[s._v("#")]),s._v(" vitest 插件 + 快捷键")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("先要配置一下 launch.json 中 vitest 配置项")])]),s._v(" "),a("li",[a("p",[s._v("安装相应的 vitest 插件")])]),s._v(" "),a("li",[a("p",[s._v("安装完后，左侧边栏就多了一个菜单")]),s._v(" "),a("ul",[a("li",[s._v("这个菜单里，就包含了所有的测试 case 很方便测试")]),s._v(" "),a("li",[s._v("点击相应的 case 可以跳到文件去 然后也可以调试")])])]),s._v(" "),a("li",[a("p",[s._v("设置快捷键，敏捷开发")]),s._v(" "),a("ul",[a("li",[s._v("keyboard shortcuts 中搜索 test")]),s._v(" "),a("li",[s._v("debug test at cursor\n"),a("ul",[a("li",[s._v("command ； + command c")])])])])])]),s._v(" "),a("blockquote",[a("p",[s._v("推荐日常开发使用 lang + 插件 + 快捷键的方式")])]),s._v(" "),a("h2",{attrs:{id:"vitest-ui"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vitest-ui"}},[s._v("#")]),s._v(" vitest --ui")]),s._v(" "),a("p",[s._v("vitest ui 类似于 vue-cli ui，是 vitest 提供的一套 ui 界面，在这个界面里面，也能调试，并且还能看到测试文件中各依赖文件的依赖关系图谱。")]),s._v(" "),a("ul",[a("li",[s._v('在 package.json 中配置 scripts "test:ui":"vitest --ui"')]),s._v(" "),a("li",[s._v("安装 ui 包\n"),a("ul",[a("li",[s._v("pnpm install @vitest/ui")])])]),s._v(" "),a("li",[s._v("配置命令打开 ui 界面\n"),a("ul",[a("li",[s._v("在 ui 界面调试相应文件即可")])])])]),s._v(" "),a("h2",{attrs:{id:"eng"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#eng"}},[s._v("#")]),s._v(" ENG")]),s._v(" "),a("p",[s._v("学习测试的好处，在于以后再些功能的时候，先写测试，再去实现功能，然后让测试通过。这样就省去了我们用假数据一个个模拟的步骤了。并且以后再次回顾，运行单测，就能够知道实现思路。")]),s._v(" "),a("p",[s._v("写在最后，本文是参照 阿崔 的《TDD 测试课》内容总结。")])])}),[],!1,null,null,null);t.default=e.exports}}]);